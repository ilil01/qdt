## Аннотация, публикуемая на сайте Фонда

## Аннотация, публикуемая на сайте Фонда(на английском языке)

## Объявленные ранее цели и основные задачи проекта на 2016 год

На данном этапе проекта были поставлены следующие цели.

1. Исследование процесса разработки и реализации моделей вычислительных машин
и их компонентов для эмулятора QEMU.

2. Анализ существующих подходов к автоматизации этого процесса.

3. Разработка и реализация метода автоматизации исследуемого процесса в
форме инструмента для разработчика моделей вычислительных машин и их
компонентов.

4. Разработка и реализация графического интерфейса, повышающего эффективность
использования разработанного инструмента.

5. Получение экспериментальных результатов применения разработанного
инструмента.

## Степень достижения поставленных в проекте целей

В ходе выполнения данного этапа удалось достичь следующих результатов.

1. Исследован процесс разработки и реализации моделей вычислительных машин
и их компонентов для эмулятора QEMU. В исследуемом процессе были выделены
основные этапы:

    1) анализ документации и/или другой доступной информации о реализуемых
    моделях;
    2) поиск в эмуляторе реализованных моделей, пригодных для использования в
    разрабатываемой вычислительной машине;
    3) создание заготовок моделей компонентов вычислительной машины, формально
    удовлетворяющих требованиям инфраструктуры эмулятора QEMU. Создание
    заготовки вычислительной машины из существующих моделей и заготовок новых
    компонентов;
    4) реализация и отладка компонентов и вычислительной машины.

2. В ходе исследований не было обнаружено развитых подходов к реализации
моделей вычислительных машин и их компонентов для эмулятора QEMU.
Доминирующий подход заключается в копировании кода существующих моделей и
их последующей доработки.

3. Разработан метод автоматизации сокращающий объём программного кода, который
требуется написать на 3-ем этапе. Он основан на применении параметризованных
шаблонов кода. Параметры шаблонов также задаются в виде программного кода, но с
меньшей избыточностью. Это позволяет сократить объём кода минимум на десятичный
порядок.

4. Разработан графический интерфейс наглядно представляющий параметры шаблона.
Модель вычислительной машины представляется графическим инструментом в виде
схемы. Такое представление позволяет лучше ориентироваться в межкомпонентных
связях, по сравнению с текстовым представлением.

5. Разработанный инструмент был протестирована на уже имеющейся в эмуляторе
модели вычислительной машины "q35" на базе набора микроконтроллеров Intel Q35.
Данная машина отличается своей сложностью, относительно других машин,
реализованных в QEMU. Данный результат демонстрирует состоятельность метода
при разработки сложных моделей машин. Кроме этого была разработана модель
маршрутизатора CISCO 2621XM. За основу была взята реализация этого
маршрутизатора
из открытого эмулятора Dynamips. Инфраструктура Dynamips в настоящее время
существенно отличается от QEMU. Данный результат демонстрирует состоятельность
метода при разработке новых машин.

## Полученные за отчетный период важнейшие научные результаты с указанием
## их междисциплинарности и значимости для развития междисциплинарных
## направлений

## Степень новизны полученных результатов

## Сопоставление полученных результатов с мировым уровнем

## Методы и подходы, использованные в ходе выполнения проекта

Метод автоматизации основан на использовании параметризованных шаблонов.
Способы построения и использования шаблонов рассматриваются ниже.

Существенная часть логики модели устройства обусловлена формальными
требованиями инфраструктуры эмулятора, а не логикой самого устройства.
То есть модель устройства можно условно разделить на индивидуальную и
интерфейсную части.

Индивидуальная часть есть суть этого устройства: то, чем это
устройство является. На практике она может быть описана в спецификации,
восстановлена из драйвера или альтернативной реализации и т.д. Вплоть до
описания на естественном языке. Эта часть не затрагивается данным проектом.

Интерфейсная часть есть программный код, который формально встраивает
индивидуальную часть в эмулятор: служит связующей оболочкой для двустороннего
взаимодействия. Замечено, что большая часть этого кода настолько похожа среди
устройств, что можно реализовать её автоматическую генерацию. При этом из
сравнительно короткого описания будет получено большие количество
кода (заготовка устройства). Кроме того будут дополнены существующие файлы
таким образом, чтобы встроить заготовку в эмулятор, сделав её доступной для
использования в машинах. Таким образом, код заготовки непосредственно можно
будет скомпилировать и запустить. Программисту останется реализовать
индивидуальную часть. При этом подразумевается использование средств
рефакторинга кода, имеющихся в большинстве современных сред разработки.

Имея законченный перечень устройств (как новых, так и существующих), можно
автоматически сгенерировать функцию инициализации машины, осуществляющую
интеграцию. При условии полноценной реализации всех используемых устройств
сгенерированная платформа сразу является рабочим прототипом. В дальнейшем можно
реализовать её настройку через командную строку и прочую расширенную
логику.

Интерфейсные части как устройств, так и машины хорошо поддаются шаблонизации.
Эта особенность положена в основу метода. При этом проектирование
вычислительной машины сводится к определению параметров шаблонов: той их
части, которая отличается от устройства к устройству. В случае машины
под параметрами понимается перечень устройств и связей между ними.

Для упрощения проектирования платформ и устройств инструмент содержит
графический интерфейс. Интерфейс аккумулирует параметры машины и устройств
в во взаимосвязанный проект проект.

Среди прочего, при достижении цели проекта применяется следующее:
- генерация фрагментов кода на языках Си и его препроцессора в правильном
порядке относительно друг друга;
- вычисление минимального количества подключаемых заголовочных файлов;
- применение соглашений о написании кода: отступы, ограничение ширины до 80
символов и т.д.;
- представление машины в виде схемы, позволяющей легче увидеть взаимосвязь
узлов;
- обратимая история изменений;
- средства облегчающие заполнение параметров, основанные на автоматическом
анализе исходного кода конкретной версии QEMU;
- расширяемый механизм адаптации всех инструментов проекта к работе с разными
версиями QEMU (с привязкой к SHA1 идентификатору версии).

Кроме это планируется реализация следующего:
- возможность выборочной отмены изменений проекта;
- эстетическая сортировка фрагментов кода: код выглядит лучше, если связанны
по смыслу фрагменты расположены рядом (другие эвристики);
- эвристический анализатор корректности текущей модели;
- инструментарий, облегчающий циклическую разработки (внесение изменений в
модель после работы программиста над сгенерированным кодом), основанный на Git.

